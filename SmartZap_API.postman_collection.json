{
  "info": {
    "name": "SmartZap API",
    "description": "Collection completa para testar todos os endpoints da API SmartZap",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://implacable-destiny-unflamboyantly.ngrok-free.dev",
      "type": "string"
    },
    {
      "key": "localUrl",
      "value": "http://localhost:3000",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Campanhas",
      "item": [
        {
          "name": "Listar Todas as Campanhas",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/campaigns",
              "host": ["{{baseUrl}}"],
              "path": ["api", "campaigns"]
            }
          },
          "response": []
        },
        {
          "name": "Criar Nova Campanha",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Promoção de Natal 2025\",\n  \"templateName\": \"promo_natal\",\n  \"recipients\": 5,\n  \"scheduledAt\": \"2025-12-25T10:00:00Z\",\n  \"contacts\": [\n    {\n      \"name\": \"João Silva\",\n      \"phone\": \"+5511999999999\"\n    },\n    {\n      \"name\": \"Maria Santos\",\n      \"phone\": \"+5511988888888\"\n    }\n  ],\n  \"templateVariables\": [\"João\", \"25/12\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/campaigns",
              "host": ["{{baseUrl}}"],
              "path": ["api", "campaigns"]
            }
          },
          "response": []
        },
        {
          "name": "Buscar Campanha por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/campaigns/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "campaigns", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "seu-campaign-id-aqui"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Atualizar Campanha",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Promoção Atualizada\",\n  \"status\": \"PAUSED\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/campaigns/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "campaigns", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "seu-campaign-id-aqui"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Deletar Campanha",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/campaigns/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "campaigns", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "seu-campaign-id-aqui"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Contatos",
      "item": [
        {
          "name": "Listar Todos os Contatos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/contacts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "contacts"]
            }
          },
          "response": []
        },
        {
          "name": "Adicionar Contato",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Maria Santos\",\n  \"phone\": \"+5511988887777\",\n  \"tags\": [\"cliente\", \"vip\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contacts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "contacts"]
            }
          },
          "response": []
        },
        {
          "name": "Importar Contatos CSV",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contacts\": [\n    { \"name\": \"João Silva\", \"phone\": \"+5511999999999\" },\n    { \"name\": \"Maria Santos\", \"phone\": \"+5511988888888\" },\n    { \"name\": \"Pedro Oliveira\", \"phone\": \"+5511977777777\" }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contacts/import",
              "host": ["{{baseUrl}}"],
              "path": ["api", "contacts", "import"]
            }
          },
          "response": []
        },
        {
          "name": "Deletar Múltiplos Contatos",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contactIds\": [\"id1\", \"id2\", \"id3\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/contacts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "contacts"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Webhook WhatsApp",
      "item": [
        {
          "name": "Verificação Webhook (Meta)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/webhook?hub.mode=subscribe&hub.verify_token=seu-verify-token&hub.challenge=12345",
              "host": ["{{baseUrl}}"],
              "path": ["api", "webhook"],
              "query": [
                {
                  "key": "hub.mode",
                  "value": "subscribe"
                },
                {
                  "key": "hub.verify_token",
                  "value": "seu-verify-token",
                  "description": "Token configurado no Meta App"
                },
                {
                  "key": "hub.challenge",
                  "value": "12345",
                  "description": "Código enviado pela Meta"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Receber Mensagem WhatsApp",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"object\": \"whatsapp_business_account\",\n  \"entry\": [\n    {\n      \"id\": \"WHATSAPP_BUSINESS_ACCOUNT_ID\",\n      \"changes\": [\n        {\n          \"value\": {\n            \"messaging_product\": \"whatsapp\",\n            \"metadata\": {\n              \"display_phone_number\": \"5511999999999\",\n              \"phone_number_id\": \"PHONE_NUMBER_ID\"\n            },\n            \"contacts\": [\n              {\n                \"profile\": {\n                  \"name\": \"João Silva\"\n                },\n                \"wa_id\": \"5511988888888\"\n              }\n            ],\n            \"messages\": [\n              {\n                \"from\": \"5511988888888\",\n                \"id\": \"wamid.HBgNNTUxMTk4ODg4ODg4OA==\",\n                \"timestamp\": \"1702910400\",\n                \"type\": \"text\",\n                \"text\": {\n                  \"body\": \"Olá, gostaria de saber mais sobre os produtos\"\n                }\n              }\n            ]\n          },\n          \"field\": \"messages\"\n        }\n      ]\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/webhook",
              "host": ["{{baseUrl}}"],
              "path": ["api", "webhook"]
            }
          },
          "response": []
        },
        {
          "name": "Status de Entrega (Webhook)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"object\": \"whatsapp_business_account\",\n  \"entry\": [\n    {\n      \"id\": \"WHATSAPP_BUSINESS_ACCOUNT_ID\",\n      \"changes\": [\n        {\n          \"value\": {\n            \"messaging_product\": \"whatsapp\",\n            \"metadata\": {\n              \"display_phone_number\": \"5511999999999\",\n              \"phone_number_id\": \"PHONE_NUMBER_ID\"\n            },\n            \"statuses\": [\n              {\n                \"id\": \"wamid.HBgNNTUxMTk4ODg4ODg4OA==\",\n                \"status\": \"delivered\",\n                \"timestamp\": \"1702910400\",\n                \"recipient_id\": \"5511988888888\"\n              }\n            ]\n          },\n          \"field\": \"messages\"\n        }\n      ]\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/webhook",
              "host": ["{{baseUrl}}"],
              "path": ["api", "webhook"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Dashboard",
      "item": [
        {
          "name": "Estatísticas do Dashboard",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard",
              "host": ["{{baseUrl}}"],
              "path": ["api", "dashboard"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Templates",
      "item": [
        {
          "name": "Listar Templates",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/templates",
              "host": ["{{baseUrl}}"],
              "path": ["api", "templates"]
            }
          },
          "response": []
        },
        {
          "name": "Buscar Templates da Meta",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/templates/fetch",
              "host": ["{{baseUrl}}"],
              "path": ["api", "templates", "fetch"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Agentes de IA",
      "item": [
        {
          "name": "Listar Agentes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/ai-agents",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai-agents"]
            }
          },
          "response": []
        },
        {
          "name": "Criar Agente de IA",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Assistente de Vendas\",\n  \"systemPrompt\": \"Você é um assistente de vendas que ajuda clientes a escolher produtos.\",\n  \"model\": \"gemini-pro\",\n  \"temperature\": 0.7\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai-agents",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai-agents"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Conversas",
      "item": [
        {
          "name": "Listar Conversas",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/conversations",
              "host": ["{{baseUrl}}"],
              "path": ["api", "conversations"]
            }
          },
          "response": []
        },
        {
          "name": "Buscar Conversa por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/conversations/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "conversations", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "seu-conversation-id-aqui"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Configurações",
      "item": [
        {
          "name": "Obter Configurações WhatsApp",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/settings/whatsapp",
              "host": ["{{baseUrl}}"],
              "path": ["api", "settings", "whatsapp"]
            }
          },
          "response": []
        },
        {
          "name": "Atualizar Configurações WhatsApp",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phoneNumberId\": \"seu-phone-number-id\",\n  \"businessAccountId\": \"seu-business-account-id\",\n  \"accessToken\": \"seu-access-token\",\n  \"displayPhoneNumber\": \"+5511999999999\",\n  \"verifiedName\": \"Sua Empresa\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/settings/whatsapp",
              "host": ["{{baseUrl}}"],
              "path": ["api", "settings", "whatsapp"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "System Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/health",
              "host": ["{{baseUrl}}"],
              "path": ["api", "health"]
            }
          },
          "response": []
        },
        {
          "name": "Status do Sistema",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/system/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "system", "status"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
